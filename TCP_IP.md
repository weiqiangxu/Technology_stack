# TCP/IP

### TCP的三次握手与四次挥手过程，各个状态名称与含义，TIMEWAIT的作用

### 为什么连接的时候是三次握手，关闭的时候却是四次握手

### 为什么需要经过2MSL(报文段在网络中最大生存时间)才能返回到CLOSE状态

### TCP协议和UDP协议的区别是什么

### 三次握手建立连接时，发送方再次发送确认的必要性

### 四次挥手释放连接时，等待2MSL的意义

### 三次握手过程中有哪些不安全性

### accept发生在三次握手的哪一步

### TCP选项有哪些

### 超时重传和快速重传

### HTTP状态码详细 

```
// 2XX成功
200 请求成功。
201 请求已被实现
202 服务器已接受请求但尚未处理

// 3XX重定向
301 永久性转移，请求的网页已永久移动到新位置。 重定向。
302 临时性转移，该资源原本确实存在，但已经被临时改变了位置。重定向
303 （查看其他位置） 请求者应当对不同的位置使用单独的 GET 请求来检索响应时，服务器返回此代码。
304 （未修改） 自从上次请求后，请求的网页未修改过。 服务器返回此响应时，不会返回网页内容。
305 （使用代理） 请求者只能使用代理访问请求的网页。 如果服务器返回此响应，还表示请求者应使用代理。
307 （临时重定向） 服务器目前从不同位置的网页响应请求，但请求者应继续使用原有位置来进行以后的请求。

// 4XX客户端错误

401 客户端没通过权限验证，当前请求需要用户验证。如果当前请求已经包含了 Authorization 证书，那么401响应代表着服务器验证已经拒绝了那些证书
403 资源不可用。服务器理解客户的请求，但拒绝处理它，通常由于服务器上文件或目录的权限设置导致的WEB访问错误
404 客户端访问地址错误，请求失败，请求所希望得到的资源未被在服务器上发现

// 5XX服务器错误

500 服务器遇到了一个未曾预料的状况，导致了它无法完成对请求的处理。一般来说，这个问题都会在服务器的程序码出错时出现。
501 服务器不支持当前请求所需要的某个功能。当服务器无法识别请求的方法，并且无法支持其对任何资源的请求。
502 作为网关或者代理工作的服务器尝试执行请求时，从上游服务器接收到无效的响应。
503 由于临时的服务器维护或者过载，服务器当前无法处理请求。这个状况是临时的，并且将在一段时间以后恢复。
```

### POST请求body

```
application/x-www-form-urlencoded
multipart/form-data
application/json
text/xml
```

### HTTP请求报文格式

```
请求行：包含请求方法、URI、HTTP版本信息
请求头部（headers）字段
请求内容实体(body)
```

### HTTP响应报文格式

```
状态行：包含HTTP版本、状态码、状态码的原因短语
响应头部（headers）字段
响应内容(body)实体
```

### HTTP和HTTPS的区别

```
协议： HTTPS就是 HTTP 和 TCP 之间增加一层 SSL/TLS 安全协议
握手机制：HTTPS在TCP三次握手之后还需要 SSL/TLS 的握手过程，才可以进行加密报文传输
端口号：HTTP端口号是80 HTTPS的端口号是 443
传输：HTTP协议是明文
CA：HTTPS协议需要向CA（证书权威机构）申请数字证书来保证服务器身份是可信的
```

### 具体HTTPS比HTTP做多了什么事情

1. 客户端的数据：客户端使用公钥对客户端发出的消息进行加密（RSA）
2. 数据防篡改 ：摘要算法（哈希）维护数据完整性，对内容进行哈希摘要
3. 服务器身份证明：服务器使用RSA私钥加签数据，其实是服务器身份的证明；私钥加密公钥解密也是常用的“数字签名算法”，只不过私钥加密的是内容的哈希值，而不是内容本身
4. 客户端判定公钥合法：服务器会使用公钥和私钥做成数字签名，加公钥和个人信息打包成数字证书，客户端拿着服务器给的证书去CA鉴别真伪 （数字证书会被服务器发给客户端，客户端再去第三方验证，证书合法就获取里面的公钥出来）

### HTTPS用的是非对称加密还是对称加密

HTTPS 采用的是对称加密和非对称加密结合的「混合加密」方式：

1. 在通信建立前采用非对称加密的方式交换「会话秘钥」，后续就不再使用非对称加密。
2. 在通信过程中全部使用对称加密的「会话秘钥」的方式加密明文数据。  

这里有一个图画的很不错(讲解通信过程)

https://blog.csdn.net/u_nravel/article/details/110052420

### HTTP缓存技术

1. 强制缓存

```
浏览器判断缓存没有过期，则直接使用浏览器的本地缓存

Status Code: 200(from disk cache)

浏览器基于 response.header.Cache-Control 和 response.header.Expires 判断
```

3. 协商缓存

```
服务器通过 status Code: 304 告知客户端可以使用缓存
客户端与服务器协商之后，依据协商结果客户端使用本地缓存，叫做协商缓存

基于 request.header.If-Modified-Since 和 response.header.Last-Modified
或
request.header.If-None-Match 和 response.header.ETag

服务器响应 Status Code:304 Not Modified(不返回资源) 或者 Status Code:200(返回资源)
```

### HTTP和RPC的区别

### 参考博客

https://zhuanlan.zhihu.com/p/81144898

https://www.jianshu.com/p/1a3fdb6fa1ff

https://blog.csdn.net/weixin_42223833/article/details/93524409

https://www.cnblogs.com/niunafei/p/14357791.html

https://baijiahao.baidu.com/s?id=1707212969156040996

